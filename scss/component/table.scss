body.obsidian-app {
  --table-add-button-border-color: var(--table-border-color);
}

table {
  &,
  .markdown-rendered & {
    --table-border-width: 0;
    --table-cell-padding: var(--size-4-2) var(--size-4-3);
    --table-header-weight: var(--font-semibold);
    --table-text-size: var(--font-small);
    --table-line-height: var(--line-height-tighter);
  }
}

// Styles tables with rounded corners and borders
table {
  &,
  .markdown-rendered & {
    width: 100%;
    overflow: hidden;
    border-spacing: 0;
    border-collapse: separate;
    border: 1px solid var(--table-border-color);
    border-radius: var(--radius-m);

    thead {
      background-color: var(--table-header-bg);
    }

    tr,
    th,
    td {
      background: transparent !important;
    }

    th,
    th * {
      font-size: var(--table-text-size);
      font-weight: var(--table-header-weight);
      line-height: var(--table-line-height);
      color: var(--table-header-color);
    }

    td,
    th {
      padding: var(--table-cell-padding);
      border: 0;
    }

    th:not(:last-child),
    td:not(:last-child) {
      border-right: 1px solid var(--table-border-color);
    }

    > tbody > tr:not(:first-child) > th,
    > tbody > tr > td,
    > tr:not(:last-child) > td,
    > tr:not(:last-child) > th {
      border-top: 1px solid var(--table-border-color);
    }

    // Automatically collapse columns that contain inline code
    thead > tr > th:has(code),
    tbody > tr > td:has(code) {
      width: 0;
    }

    code:not(pre code),
    .cm-inline-code {
      white-space: nowrap;
    }
  }
}

// Styles table selection highlights
.is-selected table :is(th, tr, td),
table :is(th, tr, td).is-selected {
  background-color: var(--color-base-05) !important;
}

// Adjustment of table styles in source mode
.markdown-source-view.mod-cm6.is-live-preview .cm-table-widget {
  .table-wrapper,
  table {
    width: 100%;
  }

  .table-cell-wrapper {
    padding: var(--table-cell-padding);
  }

  .table-row-btn {
    border-inline: 0;
  }

  .table-col-btn {
    border-block: 0;
  }
}
